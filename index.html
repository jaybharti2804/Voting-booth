<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>ELECTRONIC VOTING MACHINE</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <!-- <script src='main.js'></script> -->
</head>
<body>
    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
        import { getDatabase, ref, set, get, child, update } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-database.js";
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyBzE8DHh6-O_0P1P0a8Gs_kNGhk5G_pvcQ",
          authDomain: "voting-booth-2ec96.firebaseapp.com",
          databaseURL: "https://voting-booth-2ec96-default-rtdb.firebaseio.com/",
          projectId: "voting-booth-2ec96",
          storageBucket: "voting-booth-2ec96.appspot.com",
          messagingSenderId: "787682830398",
          appId: "1:787682830398:web:6e6f2aa7b7164b02aa096f"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const dbRef = ref(getDatabase());

        function increaseVote(partyName) {
            get(child(dbRef, partyName + "/" + "voteCounts")).then((snapshot) => {
            var count = Number(snapshot.val());

            update(ref(db, partyName), {voteCounts: count + 1 });
            });

            alert("Vote Successfully Submitted!");
        } 

        function submitVote() {
            if (document.getElementById('1').checked) {
                increaseVote("Party X");
            } else if (document.getElementById('2').checked) {
                increaseVote("Party Y");
            } else if (document.getElementById('3').checked) {
                increaseVote("Party Z");
            } else if (document.getElementById('4').checked) {
                increaseVote("Party K");
            }
        }

        var button = document.getElementById('submit-vote');
        button.onclick = submitVote;

      </script>

    <div class="continput">
            <h1>Virtual Voting Booth</h1>
            <h4>Choose Wisely...</h4>
            <ul>
            <li>
                <input checked type="radio" name="1" id="1">
                <label>Party X</label>
                <div class="bullet">
                <div class="line zero"></div>
                <div class="line one"></div>
                <div class="line two"></div>
                <div class="line three"></div>
                <div class="line four"></div>
                <div class="line five"></div>
                <div class="line six"></div>
                <div class="line seven"></div>
                </div>
            </li>
            <li>
                <input type="radio" name="1" id="2">
                <label>Party Y</label>
                <div class="bullet">
                <div class="line zero"></div>
                <div class="line one"></div>
                <div class="line two"></div>
                <div class="line three"></div>
                <div class="line four"></div>
                <div class="line five"></div>
                <div class="line six"></div>
                <div class="line seven"></div>
                </div>
            </li>
            <li>
                <input type="radio" name="1" id="3">
                <label>Party Z</label>
                <div class="bullet">
                <div class="line zero"></div>
                <div class="line one"></div>
                <div class="line two"></div>
                <div class="line three"></div>
                <div class="line four"></div>
                <div class="line five"></div>
                <div class="line six"></div>
                <div class="line seven"></div>
                </div>
            </li>
            <li>
                <input type="radio" name="1" id="4">
                <label>Party K</label>
                <div class="bullet">
                <div class="line zero"></div>
                <div class="line one"></div>
                <div class="line two"></div>
                <div class="line three"></div>
                <div class="line four"></div>
                <div class="line five"></div>
                <div class="line six"></div>
                <div class="line seven"></div>
                </div>
            </li>
            <li>
                <input type="submit" value="Submit" class="submit" id="submit-vote">
            </li>
            </ul>
      </div>
</body>
</html>
